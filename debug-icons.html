<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图标调试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .debug-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .path-test {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .success { border-color: #28a745; background-color: #d4edda; }
        .error { border-color: #dc3545; background-color: #f8d7da; }
        .info { border-color: #17a2b8; background-color: #d1ecf1; }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>图标加载调试工具</h1>
    
    <div class="debug-container">
        <h2>环境信息</h2>
        <div class="path-test info">
            <strong>当前URL:</strong> <span id="current-url"></span><br>
            <strong>域名:</strong> <span id="domain"></span><br>
            <strong>路径:</strong> <span id="path"></span><br>
            <strong>协议:</strong> <span id="protocol"></span>
        </div>
    </div>
    
    <div class="debug-container">
        <h2>路径测试</h2>
        <div id="path-tests"></div>
    </div>
    
    <div class="debug-container">
        <h2>图标测试</h2>
        <div id="icon-tests"></div>
    </div>
    
    <div class="debug-container">
        <h2>控制台日志</h2>
        <pre id="console-log"></pre>
    </div>

    <script>
        // 显示环境信息
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('domain').textContent = window.location.hostname;
        document.getElementById('path').textContent = window.location.pathname;
        document.getElementById('protocol').textContent = window.location.protocol;
        
        // 测试路径列表
        const testPaths = [
            'public/assets/brightness_4.svg',
            'assets/brightness_4.svg',
            '/assets/brightness_4.svg',
            './assets/brightness_4.svg',
            '../assets/brightness_4.svg',
            'public/assets/brightness_7.svg',
            'assets/brightness_7.svg',
            '/assets/brightness_7.svg',
            './assets/brightness_7.svg',
            '../assets/brightness_7.svg'
        ];
        
        // 路径测试
        const pathTestsContainer = document.getElementById('path-tests');
        testPaths.forEach(path => {
            const testDiv = document.createElement('div');
            testDiv.className = 'path-test';
            testDiv.innerHTML = `
                <strong>测试路径:</strong> ${path}<br>
                <strong>完整URL:</strong> ${new URL(path, window.location.href).href}<br>
                <strong>状态:</strong> <span id="status-${path.replace(/[^a-zA-Z0-9]/g, '-')}">测试中...</span>
            `;
            pathTestsContainer.appendChild(testDiv);
            
            // 测试路径是否存在
            fetch(path, { method: 'HEAD' })
                .then(response => {
                    const statusElement = document.getElementById(`status-${path.replace(/[^a-zA-Z0-9]/g, '-')}`);
                    if (response.ok) {
                        statusElement.textContent = '✓ 可访问';
                        testDiv.classList.add('success');
                    } else {
                        statusElement.textContent = '✗ 不可访问';
                        testDiv.classList.add('error');
                    }
                })
                .catch(error => {
                    const statusElement = document.getElementById(`status-${path.replace(/[^a-zA-Z0-9]/g, '-')}`);
                    statusElement.textContent = '✗ 错误: ' + error.message;
                    testDiv.classList.add('error');
                });
        });
        
        // 图标加载测试
        const iconTestsContainer = document.getElementById('icon-tests');
        const testIcons = [
            { name: '夜间图标', path: 'public/assets/brightness_4.svg' },
            { name: '日间图标', path: 'public/assets/brightness_7.svg' },
            { name: 'GitHub图标', path: 'public/assets/github.svg' }
        ];
        
        testIcons.forEach(icon => {
            const testDiv = document.createElement('div');
            testDiv.className = 'path-test';
            testDiv.innerHTML = `
                <strong>${icon.name}:</strong> ${icon.path}<br>
                <img src="${icon.path}" alt="${icon.name}" style="width: 24px; height: 24px; margin: 5px 0;" 
                     onload="this.parentElement.classList.add('success')" 
                     onerror="this.parentElement.classList.add('error')">
                <span id="icon-status-${icon.name.replace(/\s+/g, '-')}">测试中...</span>
            `;
            iconTestsContainer.appendChild(testDiv);
            
            const img = testDiv.querySelector('img');
            img.onload = function() {
                const statusElement = document.getElementById(`icon-status-${icon.name.replace(/\s+/g, '-')}`);
                statusElement.textContent = '✓ 加载成功';
            };
            img.onerror = function() {
                const statusElement = document.getElementById(`icon-status-${icon.name.replace(/\s+/g, '-')}`);
                statusElement.textContent = '✗ 加载失败';
            };
        });
        
        // 控制台日志捕获
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        const logContainer = document.getElementById('console-log');
        
        function addToLog(type, message) {
            const timestamp = new Date().toLocaleTimeString();
            logContainer.textContent += `[${timestamp}] ${type}: ${message}\n`;
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToLog('LOG', args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToLog('ERROR', args.join(' '));
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToLog('WARN', args.join(' '));
        };
        
        // 测试主题切换
        setTimeout(() => {
            console.log('开始测试主题切换功能...');
            
            // 模拟主题切换
            const themeToggle = document.createElement('button');
            themeToggle.textContent = '测试主题切换';
            themeToggle.onclick = function() {
                console.log('点击主题切换按钮');
                // 这里可以添加实际的主题切换逻辑
            };
            document.body.appendChild(themeToggle);
        }, 1000);
    </script>
</body>
</html> 